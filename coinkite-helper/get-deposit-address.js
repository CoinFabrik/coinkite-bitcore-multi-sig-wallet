/**
 * Returns a p2sh address as generated by Coinkite, given the HD public keys. (Derivation path "m/x")
 * @param {Array} hdPublicKeys The xpub strings.
 * @param {int} index The index to be used in the derivation path (The "x" in "m/x").
 * @param {int} requiredSignatures The number of signatures required to spend.
 * @returns {*}
 */
module.exports = function getDepositAddress(hdPublicKeys, index, requiredSignatures){
    var derivedPublicKeys = hdPublicKeys.map(function(pubString){
        return (new bitcore.HDPublicKey(pubString))
            .derive('m/' + index)
            .publicKey;
    });
    console.log(derivedPublicKeys.map(function(pub) {
        console.log('public key:' + pub);
        return bitcore.Address.fromPublicKey(pub, bitcore.Networks.livenet);
    }));
    return new bitcore.Address(derivedPublicKeys, requiredSignatures);
};